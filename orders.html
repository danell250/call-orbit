<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CallOrbit — Buy Numbers & Plans</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="data:image/svg+xml,
  <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'>
    <circle cx='32' cy='32' r='30' fill='%233b82f6'/>
  </svg>">
  <script src="https://www.paypal.com/sdk/js?client-id=AZj-lkjSMiruqhm64d7ZET-1K7Kv4YLo8IuJn_0ikbzNU3oR91hnmQN2l8uQXNyYYgOb0gqlv5aLM94N&components=buttons&currency=USD"></script>
  <style>
    /* Add your CSS styles here */
  </style>
</head>
<body>
  <nav>
    <div><a href="/"><strong>CallOrbit</strong></a></div>
    <div>
      <a href="/" >Home</a>
      <a href="/features">Features</a>
      <a href="/pricing">Pricing</a>
      <a href="/about">About</a>
      <a href="/contact">Contact</a>
      <a href="/coverage">Coverage</a>
      <a href="/platform">Platform</a>
    </div>
  </nav>

  <header class="hero fade-in">
    <h1>Choose Your Plan & Number</h1>
    <p>Pick your country, plan, and forwarding number to get started.</p>
  </header>

  <main>
    <div class="forwarding">
      <label for="country">Select Country</label>
      <select id="country">
        <!-- Add country options here -->
      </select>

      <label for="forward">Forwarding Number / Device</label>
      <input type="text" id="forward" placeholder="+27 10 500 1234 or SIP URI">
    </div>

    <div class="plans-grid" id="plans-container"></div>

    <div class="cart" id="cart">
      <h2>Your Cart</h2>
      <div id="cart-items"></div>
      <div style="display:flex;justify-content:space-between;font-weight:700;margin-top:10px;">
        <span>Total:</span><span id="cart-total">$0.00</span>
      </div>
      <button id="checkout" class="checkout-btn">Checkout with PayPal</button>
    </div>
  </main>

  <footer style="text-align:center;padding:2rem;background:#f3f4f6;margin-top:2rem;">
    &copy; <span id="year"></span> CallOrbit. All rights reserved.
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const countryData = {
      // Add country data here
    };

    const paypalLinks = {
      Basic:"D3RVF4626URRQ",
      Plus:"AHZT9B8R76YSY",
      Pro:"M3MTFMBP6NUA8",
      Max:"DXLHHXVJQS95Q"
    };

    const countrySelect = document.getElementById('country');
    const forwardInput = document.getElementById('forward');
    const plansContainer = document.getElementById('plans-container');
    const cartItems = document.getElementById('cart-items');
    const cartTotalEl = document.getElementById('cart-total');
    const checkoutBtn = document.getElementById('checkout');

    let cart = [];

    function renderPlans(){
      plansContainer.innerHTML='';
      const c = countrySelect.value;
      const plans = countryData[c];
      for(const plan in plans){
        const data = plans[plan];
        const div = document.createElement('div');
        div.className='plan';
        div.innerHTML=`
          <h3>${plan}</h3>
          <div class="price">$${data.price} /mo</div>
          <div class="minutes">${data.minutes} included minutes</div>
          <div class="overage">$${data.overage.toFixed(3)} per extra minute</div>
          <button class="buy-now">Add to Cart</button>
        `;
        div.querySelector('button').addEventListener('click',()=>{
          addToCart(c,plan,data);
        });
        plansContainer.appendChild(div);
      }
    }

    function addToCart(country,plan,data){
      const forward = forwardInput.value || '—';
      cart.push({country,plan,price:data.price,minutes:data.minutes,forward});
      renderCart();
    }

    function renderCart(){
      cartItems.innerHTML='';
      let total = 0;
      cart.forEach((item,index)=>{
        total+=item.price;
        const div = document.createElement('div');
        div.className='cart-item';
        div.innerHTML=`<span>${item.country} - ${item.plan} (${item.minutes} min)</span><span>$${item.price.toFixed(2)}</span>`;
        cartItems.appendChild(div);
      });
      cartTotalEl.textContent=`$${total.toFixed(2)}`;
    }

    checkoutBtn.addEventListener('click',()=>{
      if(cart.length===0){alert('Cart is empty'); return;}
      // Redirect to PayPal checkout
      const total = cart.reduce((sum,item)=>sum+item.price,0).toFixed(2);
      paypal.Buttons({
        createOrder:function(data,actions){
          return actions.order.create({
            purchase_units:[{amount:{value:total}}]
          });
        },
        onApprove:function(data,actions){
          return actions.order.capture().then(function(details){
            alert('Payment completed by '+details.payer.name.given_name);
            cart=[];
            renderCart();
          });
        }
      }).render('body'); // temporary render to body
    });

    countrySelect.addEventListener('change',renderPlans);
    forwardInput.addEventListener('input',renderPlans);

    renderPlans();
  </script>
</body>
</html>
