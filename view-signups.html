<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CallOrbit - View Signups</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f8fafc;
        }
        .header {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        th {
            background-color: #f1f5f9;
            font-weight: 600;
        }
        tr:hover {
            background-color: #f8fafc;
        }
        .actions {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
        }
        .primary {
            background: #3b82f6;
            color: white;
        }
        .danger {
            background: #ef4444;
            color: white;
        }
        .export {
            background: #10b981;
            color: white;
        }
        .empty {
            text-align: center;
            padding: 40px;
            color: #64748b;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>CallOrbit Signup Data</h1>
        <p>Backup signup records stored in browser localStorage</p>
    </div>
    
    <div class="container">
        <div class="actions">
            <button class="primary" onclick="loadSignups()">Refresh Data</button>
            <button class="export" onclick="exportToCSV()">Export to CSV</button>
            <button class="danger" onclick="clearAllSignups()">Clear All Data</button>
        </div>
        
        <div id="signups-table">
            <div class="empty">
                <p>No signup data found. Submit the signup form to see data here.</p>
            </div>
        </div>
    </div>

    <script>
        function loadSignups() {
            const signups = JSON.parse(localStorage.getItem('callorbit_signups') || '[]');
            const tableContainer = document.getElementById('signups-table');
            
            if (signups.length === 0) {
                tableContainer.innerHTML = `
                    <div class="empty">
                        <p>No signup data found. Submit the signup form to see data here.</p>
                    </div>
                `;
                return;
            }
            
            // Create table
            let tableHTML = `
                <p><strong>Total Signups:</strong> ${signups.length}</p>
                <table>
                    <thead>
                        <tr>
                            <th>Timestamp</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Company</th>
                            <th>Phone</th>
                            <th>Plan</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            // Add rows
            signups.forEach(signup => {
                tableHTML += `
                    <tr>
                        <td>${signup.timestamp ? new Date(signup.timestamp).toLocaleString() : 'N/A'}</td>
                        <td>${signup['First Name'] || ''} ${signup['Last Name'] || ''}</td>
                        <td>${signup.Email || ''}</td>
                        <td>${signup['Company Name'] || ''}</td>
                        <td>${signup['Phone Number'] || ''}</td>
                        <td>${signup['Selected Plan'] || ''}</td>
                    </tr>
                `;
            });
            
            tableHTML += `
                    </tbody>
                </table>
            `;
            
            tableContainer.innerHTML = tableHTML;
        }
        
        function exportToCSV() {
            const signups = JSON.parse(localStorage.getItem('callorbit_signups') || '[]');
            
            if (signups.length === 0) {
                alert('No data to export');
                return;
            }
            
            // Create CSV content
            let csvContent = 'Timestamp,First Name,Last Name,Email,Company Name,Phone Number,Selected Plan\n';
            
            signups.forEach(signup => {
                csvContent += `"${signup.timestamp || ''}","${signup['First Name'] || ''}","${signup['Last Name'] || ''}","${signup.Email || ''}","${signup['Company Name'] || ''}","${signup['Phone Number'] || ''}","${signup['Selected Plan'] || ''}"\n`;
            });
            
            // Create download link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.setAttribute('href', url);
            link.setAttribute('download', `callorbit_signups_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        function clearAllSignups() {
            if (confirm('Are you sure you want to clear all signup data? This cannot be undone.')) {
                localStorage.removeItem('callorbit_signups');
                loadSignups();
                alert('All signup data has been cleared.');
            }
        }
        
        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadSignups);
    </script>
</body>
</html>